#!/usr/bin/env zsh
# Executes commands at the start of an interactive session.

zmodload zsh/zprof
local zshrc_start=$(gdate +%s%N)

# export NVM_DIR="$HOME/.nvm"
# [ -s "$NVM_DIR/nvm.sh" ] && . "$NVM_DIR/nvm.sh" # This loads nvm

# Source Prezto.
if [[ -s "/Users/ryan/.zprezto/init.zsh" ]]; then
  source "/Users/ryan/.zprezto/init.zsh"
fi

# Init rbenv
eval "$(rbenv init -)"

# Fuzzy Completions
[ -f ~/.fzf.zsh ] && source ~/.fzf.zsh

# F path to completion functions
fpath=(
/usr/local/share/zsh/site-functions
$fpath
/usr/local/var/homebrew/linked/zsh/share/zsh/functions
)

# gulp
eval "$(gulp --completion=zsh)"

# Personalizations
alias rhelp=run-help
alias gi='grep -i'
export CLICOLOR=xterm-color

# iTerm2 shell integration hooks
source "/Users/ryan/.iterm2_shell_integration.zsh"

# # Node version manager
 export NVM_LAZY_LOAD=true
 source "/Users/ryan/.nvm/zsh-nvm/zsh-nvm.plugin.zsh"

local zshrc_end=$(gdate +%s%N)
function calc () {
	bc -l <<< "$@"
}

print "~/.zshrc loaded:" $(calc "scale=3;($zshrc_end-$zshrc_start)/10^(9)") "seconds"
unset zshrc_end
unset zshrc_start
